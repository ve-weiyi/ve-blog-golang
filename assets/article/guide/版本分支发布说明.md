# ç‰ˆæœ¬åˆ†æ”¯å‘å¸ƒè¯´æ˜

æœ¬æ–‡æ¡£è¯´æ˜ ve-blog-golang é¡¹ç›®çš„ç‰ˆæœ¬ç®¡ç†è§„èŒƒå’Œå‘å¸ƒæµç¨‹ã€‚

## åˆ†æ”¯ç®¡ç†

### åˆ†æ”¯è¯´æ˜

| åˆ†æ”¯åç§°        | ç”¨é€”     | ç¨³å®šæ€§    | è¯´æ˜                          |
|-------------|--------|--------|-----------------------------|
| `main`      | ä¸»åˆ†æ”¯    | âœ… ç¨³å®š   | æœ€æ–°ç¨³å®šç‰ˆæœ¬ï¼Œä¿è¯å‰åç«¯å¯ä»¥æ­£å¸¸è¿è¡Œ          |
| `release/*` | å‘å¸ƒåˆ†æ”¯   | âœ… ç¨³å®š   | è®°å½•é‡è¦ç‰ˆæœ¬ä»£ç ï¼Œå¦‚ `release/v1.0.0` |
| `feature/*` | åŠŸèƒ½å¼€å‘åˆ†æ”¯ | âš ï¸ ä¸ç¨³å®š | å¼€å‘æ–°åŠŸèƒ½ï¼Œå¯èƒ½è¢«å¼ºåˆ¶æ¨é€è¦†ç›–ä»£ç            |
| `hotfix/*`  | çƒ­ä¿®å¤åˆ†æ”¯  | âœ… ç¨³å®š   | ç´§æ€¥ä¿®å¤ç”Ÿäº§ç¯å¢ƒé—®é¢˜                  |

### åˆ†æ”¯åˆå¹¶è§„åˆ™

```
feature/* â†’ release/* â†’ main
                â†‘
            hotfix/*
```

**åˆå¹¶æµç¨‹**ï¼š

1. åŠŸèƒ½å¼€å‘ï¼š`feature/*` â†’ `release/*`
2. ç‰ˆæœ¬å‘å¸ƒï¼š`release/*` â†’ `main`
3. ç´§æ€¥ä¿®å¤ï¼š`hotfix/*` â†’ `main` + `release/*`

### åˆ†æ”¯å‘½åè§„èŒƒ

```bash
# åŠŸèƒ½åˆ†æ”¯
feature/user-login
feature/article-comment

# å‘å¸ƒåˆ†æ”¯
release/v1.0.0
release/v1.1.0

# çƒ­ä¿®å¤åˆ†æ”¯
hotfix/fix-login-bug
hotfix/security-patch
```

## ç‰ˆæœ¬å·è§„èŒƒ

é‡‡ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬å·ï¼š`ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·`ï¼ˆå¦‚ `v1.2.3`ï¼‰

### ç‰ˆæœ¬å·è¯´æ˜

| ç‰ˆæœ¬ç±»å‹ | è¯´æ˜   | ç¤ºä¾‹                  | ä½•æ—¶å‡çº§             |
|------|------|---------------------|------------------|
| ä¸»ç‰ˆæœ¬å· | é‡å¤§å˜æ›´ | `v1.0.0` â†’ `v2.0.0` | ä¸å…¼å®¹çš„ API ä¿®æ”¹ã€æ¶æ„é‡æ„ |
| æ¬¡ç‰ˆæœ¬å· | åŠŸèƒ½æ›´æ–° | `v1.0.0` â†’ `v1.1.0` | æ–°å¢åŠŸèƒ½ã€è¾ƒå¤§ä»£ç å˜åŠ¨      |
| ä¿®è®¢å·  | é—®é¢˜ä¿®å¤ | `v1.0.0` â†’ `v1.0.1` | Bug ä¿®å¤ã€å°ä¼˜åŒ–       |

### ç‰ˆæœ¬å·ç¤ºä¾‹

```
v1.0.0  # é¦–æ¬¡æ­£å¼å‘å¸ƒ
v1.0.1  # ä¿®å¤ç™»å½• Bug
v1.1.0  # æ–°å¢è¯„è®ºåŠŸèƒ½
v1.1.1  # ä¿®å¤è¯„è®ºæ˜¾ç¤ºé—®é¢˜
v2.0.0  # æ¶æ„å‡çº§ï¼Œä¸å…¼å®¹æ—§ç‰ˆæœ¬
```

## å‘å¸ƒæµç¨‹

### 1. åŠŸèƒ½å¼€å‘

```bash
# åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/new-feature main

# å¼€å‘å¹¶æäº¤
git add .
git commit -m "feat: add new feature"

# æ¨é€åˆ°è¿œç¨‹
git push origin feature/new-feature
```

### 2. ç‰ˆæœ¬å‘å¸ƒ

```bash
# åˆ›å»ºå‘å¸ƒåˆ†æ”¯
git checkout -b release/v1.1.0 main

# åˆå¹¶åŠŸèƒ½åˆ†æ”¯
git merge feature/new-feature

# æ›´æ–°ç‰ˆæœ¬å·å’Œ CHANGELOG
vim version.go
vim CHANGELOG.md

# æäº¤å¹¶æ‰“æ ‡ç­¾
git commit -m "chore: release v1.1.0"
git tag -a v1.1.0 -m "Release version 1.1.0"

# æ¨é€åˆ°è¿œç¨‹
git push origin release/v1.1.0
git push origin v1.1.0

# åˆå¹¶åˆ°ä¸»åˆ†æ”¯
git checkout main
git merge release/v1.1.0
git push origin main
```

### 3. çƒ­ä¿®å¤æµç¨‹

```bash
# ä»ä¸»åˆ†æ”¯åˆ›å»ºçƒ­ä¿®å¤åˆ†æ”¯
git checkout -b hotfix/fix-critical-bug main

# ä¿®å¤å¹¶æäº¤
git add .
git commit -m "fix: critical bug"

# åˆå¹¶åˆ°ä¸»åˆ†æ”¯å’Œå‘å¸ƒåˆ†æ”¯
git checkout main
git merge hotfix/fix-critical-bug
git push origin main

git checkout release/v1.1.0
git merge hotfix/fix-critical-bug
git push origin release/v1.1.0
```

## Commit è§„èŒƒ

é‡‡ç”¨ Conventional Commits è§„èŒƒï¼š

```
<type>(<scope>): <subject>

<body>

<footer>
```

### Type ç±»å‹

| Type       | è¯´æ˜     | ç¤ºä¾‹                           |
|------------|--------|------------------------------|
| `feat`     | æ–°åŠŸèƒ½    | `feat: add user login`       |
| `fix`      | Bug ä¿®å¤ | `fix: resolve login error`   |
| `docs`     | æ–‡æ¡£æ›´æ–°   | `docs: update README`        |
| `style`    | ä»£ç æ ¼å¼   | `style: format code`         |
| `refactor` | ä»£ç é‡æ„   | `refactor: optimize query`   |
| `test`     | æµ‹è¯•ç›¸å…³   | `test: add unit tests`       |
| `chore`    | æ„å»º/å·¥å…·  | `chore: update dependencies` |
| `perf`     | æ€§èƒ½ä¼˜åŒ–   | `perf: optimize load speed`  |
| `build`    | æ„å»ºæ‰“åŒ…   | `build: update webpack`      |
| `ci`       | CI/CD  | `ci: add test step`          |
| `revert`   | å›æ»šæäº¤   | `revert: revert feat login`  |
| `release`  | ç‰ˆæœ¬å‘å¸ƒ   | `release: bump to v1.2.0`    |
| `merge`    | åˆ†æ”¯åˆå¹¶   | `merge: merge feature/user`  |
| `sync`     | åŒæ­¥ä»£ç    | `sync: sync with upstream`   |

### Commit ç¤ºä¾‹

```bash
git commit -m "feat(auth): add OAuth login support"
git commit -m "fix(api): resolve null pointer exception"
git commit -m "docs: update deployment guide"
```

## æ³¨æ„äº‹é¡¹

1. âš ï¸ **feature åˆ†æ”¯ä¸ç¨³å®š**ï¼šä½œè€…å¯èƒ½å¼ºåˆ¶æ¨é€è¦†ç›–æäº¤ï¼Œè¯·åŠæ—¶åŒæ­¥
2. âœ… **ä»¥ main åˆ†æ”¯ä¸ºå‡†**ï¼šç”Ÿäº§ç¯å¢ƒéƒ¨ç½²è¯·ä½¿ç”¨ main æˆ– release åˆ†æ”¯
3. ğŸ“ **åŠæ—¶æ›´æ–°æ–‡æ¡£**ï¼šç‰ˆæœ¬å‘å¸ƒæ—¶åŒæ­¥æ›´æ–° CHANGELOG å’Œæ–‡æ¡£
4. ğŸ·ï¸ **è§„èŒƒä½¿ç”¨æ ‡ç­¾**ï¼šæ¯æ¬¡å‘å¸ƒéƒ½è¦æ‰“ tagï¼Œä¾¿äºç‰ˆæœ¬è¿½æº¯

## å‘å¸ƒå†å²

æŸ¥çœ‹å®Œæ•´å‘å¸ƒå†å²ï¼šhttps://github.com/ve-weiyi/ve-blog-golang/releases
